
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<div class="centered-content">
  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">

    <h1 style="background-color: #0077cc; color: #000;">Branch Managements</h1>
  </head>


  <br>
  <body>

    <%= form_tag(branches_path, method: :get) do %>
    <%= text_field_tag :search, params[:search], placeholder: 'Enter your branch code', class: 'form-label custom-border' %>
    <%= submit_tag 'Search',class: "btn btn-info btn-block" %>
  <% end %>
  <br>
  <%= form_with(model: @branch, url: branches_path, method: :post, local: true) do |form| %>
    <% fields = [
      { attribute: :company_code, label: 'Company Code', placeholder: 'Enter company code' },
      { attribute: :company_name, label: 'Company Name', placeholder: 'Enter company name' },
      { attribute: :branch_code, label: 'Branch Code', placeholder: 'Enter branch code' },
      { attribute: :branch_name, label: 'Branch Name', placeholder: 'Enter branch name' },
      { attribute: :email, label: 'Email', placeholder: 'Enter email' },
      { attribute: :phone, label: 'Phone', placeholder: 'Enter phone number' },
      { attribute: :status, label: 'Status', prompt: 'Select status', options: ['Working', 'Pending', 'Stop'] }
    ] %>
    <% fields.each do |field| %>
      <div class="row mb-3">
        <div class="col-md-2">
          <%= form.label field[:attribute], "<strong>#{field[:label]}</strong>".html_safe, class: 'form-label form-section-label' %>
        </div>
        <div class="col-md-9">
          <% if field[:attribute] == :status %>
            <%= form.select field[:attribute], field[:options], { prompt: field[:prompt] }, class: 'form-control custom-border', style: 'max-width: 200px;' %>
          <% else %>
            <%= form.text_field field[:attribute], placeholder: field[:placeholder], class: 'form-control custom-border', style: 'max-width: 200px;' %>
          <% end %>
        </div>
      </div>
    <% end %>

    <hr>

    <br>
    <div class="form-group row mt-3 justify-content-end">
      <div class="col-sm-6 text-end">
        <%= form.submit 'Register', class: "btn btn-success" %>
        <%= link_to 'Back', root_path, class: "btn btn-dark ms-2" %>
      </div>
    </div>
  <% end %>


  <div class="container">
    <table class="styled-table full-width-table">

      <thead>
      <tr>
        <th style="background-color: #0077cc; color: #000;">Code</th>
        <th style="background-color: #0077cc; color: #000;">Branch Name</th>
        <th style="background-color: #0077cc; color: #000;">Email</th>
        <th style="background-color: #0077cc; color: #000;">Phone</th>
        <th style="background-color: #0077cc; color: #000;">Status</th>
        <th style="background-color: #0077cc; color: #000;">Action</th>
      </tr>
      </thead>
      <tbody>
      <% @branches.each do |branch| %>
        <tr>
          <td class="center-text"><%= branch.branch_code %></td>
          <td class="center-text"><%= branch.branch_name %></td>
          <td class="center-text"><%= branch.email %></td>
          <td class="center-text"><%= branch.phone %></td>
          <td class="center-text <%= branch.status.downcase %>">
            <%= branch.status %>
          </td>
          <td class="center-text">
            <div class="btn-group" role="group" aria-label="Button group">
              <%= link_to 'Detail', "/branches/#{branch.id}", class: "btn btn-info btn-block" %>
              <div class="mx-1"></div> <!-- Tạo khoảng cách ngang -->
              <%= button_to 'Delete', branch_path(branch), method: :delete, class: 'btn btn-danger delete-btn', title: 'Delete', onclick: 'return confirmDelete();' %>
            </div>
          </td>

          <script>
              function confirmDelete() {
                  return confirm('Are you sure you want to delete this division?');
              }
          </script>        </tr>
      <% end %>
      <!-- Thêm các hàng khác tương tự -->
      </tbody>
    </table>
  </div>

  </body>
  </html>


  </table>


</div>

<div style="display: flex; justify-content: flex-end;">
  <%= paginate @branches, theme: 'twitter-bootstrap-3' %>
</div>

<label for="rowsPerPage">Rows per page:</label>
<select name="rowsPerPage" id="rowsPerPage" onchange="changeRowsPerPage(this.value)">
  <option value="5" <%= 'selected' if params[:per].to_i == 5 %>>5</option>
  <option value="10" <%= 'selected' if params[:per].to_i == 10 %>>10</option>
  <option value="15" <%= 'selected' if params[:per].to_i == 15 %>>15</option>
  <option value="20" <%= 'selected' if params[:per].to_i == 20 %>>20</option>
</select>
<script>
    function changeRowsPerPage(rowsPerPage) {
        // Gửi yêu cầu đến máy chủ để lấy dữ liệu mới dựa trên số hàng trên mỗi trang đã chọn
        // Ở đây bạn có thể sử dụng AJAX để gửi yêu cầu không cần phải tải lại trang
        window.location.href = `http://localhost:3000/branches?per=${rowsPerPage}`
    }
</script>


<style>
    table{
        background-color: aliceblue;
    }
    table,tr,th,td{
        padding: 10px;
        border: 1px solid black;
        border-collapse: collapse;
    }
    .centered-content {
        text-align: center;
    }
    .student-table {
        margin: 0 auto;
    }

</style>

<style>
    .pagination {
        text-align: center;
    }

    .pagination a {
        display: inline-block;
        padding: 5px 10px;
        margin: 0 5px;
        color: #333;
        text-decoration: none;
        border: 1px solid #ccc;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

    .pagination a:hover {
        background-color: #f0f0f0;
    }

    .pagination .prev,
    .pagination .next {
        background-color: #fff;
    }

</style>

<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }

    .container {
        max-width: 800px;
        margin: 50px auto;
    }

    h1 {
        text-align: center;
    }

    .styled-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        border: 1px solid #ddd;
    }

    .styled-table th,
    .styled-table td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
    }

    .styled-table th {
        background-color: #f2f2f2;
    }

    .styled-table tbody tr:nth-child(even) {
        background-color: #f2f2f2;
    }

</style>

<style>
    .full-width-table {
        width: 100vw; /* Đảm bảo bảng rộng hết màn hình từ bên trái đến bên phải */
        margin-left: -530px; /* Điều chỉnh margin bên trái để căn lề */
        margin-right:10x; /* Điều chỉnh margin bên phải để căn lề */
    }
    .custom-border {
        border-color: #007bff; /* Màu viền của trường */
    }



    .working {
        color: green; /* Màu xanh lá cây cho trạng thái Working */
    }

    .pending {
        color: #FFD700; /* Màu vàng cho trạng thái Pending */
    }

    .stop {
        color: red; /* Màu đỏ cho trạng thái Stop */
    }
</style>

